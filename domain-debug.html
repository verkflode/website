<!DOCTYPE html>
<html>
<head>
    <title>Domain Debug for Turnstile</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .info { background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .error { background: #ffebee; padding: 15px; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Turnstile Domain Debug</h1>
    
    <div class="info">
        <h3>Current Domain Information:</h3>
        <p><strong>Hostname:</strong> <span id="hostname"></span></p>
        <p><strong>Full URL:</strong> <span id="fullUrl"></span></p>
        <p><strong>Protocol:</strong> <span id="protocol"></span></p>
        <p><strong>Port:</strong> <span id="port"></span></p>
    </div>
    
    <div class="info">
        <h3>Turnstile Configuration:</h3>
        <p><strong>Site Key:</strong> 0x4AAAAAABvQQQ8dZiQYK5sR</p>
        <p><strong>Expected Domains in Cloudflare:</strong></p>
        <ul>
            <li>verkflode.com</li>
            <li>www.verkflode.com</li>
            <li>verkflode.se</li>
            <li>www.verkflode.se</li>
            <li>localhost (for testing)</li>
        </ul>
    </div>
    
    <div id="result" class="error">
        <h3>üîç Domain Check Result:</h3>
        <p id="domainStatus">Checking...</p>
    </div>
    
    <script>
        // Display current domain info
        document.getElementById('hostname').textContent = window.location.hostname;
        document.getElementById('fullUrl').textContent = window.location.href;
        document.getElementById('protocol').textContent = window.location.protocol;
        document.getElementById('port').textContent = window.location.port || 'default';
        
        // Check if current domain should work
        const currentDomain = window.location.hostname;
        const allowedDomains = [
            'verkflode.com',
            'www.verkflode.com', 
            'verkflode.se',
            'www.verkflode.se',
            'localhost'
        ];
        
        const statusElement = document.getElementById('domainStatus');
        const resultDiv = document.getElementById('result');
        
        if (allowedDomains.includes(currentDomain)) {
            statusElement.innerHTML = `
                ‚úÖ <strong>Domain "${currentDomain}" SHOULD work</strong><br>
                If you're getting 401 errors, the domain is missing from your Cloudflare Turnstile configuration.<br><br>
                <strong>Action needed:</strong> Add "${currentDomain}" to your Turnstile domains list in Cloudflare Dashboard.
            `;
            resultDiv.className = 'info';
        } else {
            statusElement.innerHTML = `
                ‚ùå <strong>Domain "${currentDomain}" is NOT configured</strong><br>
                This domain will definitely cause 401 errors.<br><br>
                <strong>Action needed:</strong> Add "${currentDomain}" to your Turnstile domains list in Cloudflare Dashboard.
            `;
            resultDiv.className = 'error';
        }
    </script>
</body>
</html>